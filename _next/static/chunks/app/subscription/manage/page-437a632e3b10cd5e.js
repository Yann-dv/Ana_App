(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[645],{1981:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},8291:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},8203:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},3008:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},9168:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]])},5817:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},9409:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},2245:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},5750:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},8339:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]])},7010:function(e,t,s){Promise.resolve().then(s.bind(s,4902))},4902:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return k}});var a=s(7437),r=s(2265),i=s(5251),l=s(3008),n=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,n.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var d=s(1981),o=s(2245),u=s(9168),m=s(5750),x=s(8203),h=s(8339),p=s(5817),y=s(9409),g=s(8291);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let f=(0,n.Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var b=s(1638),v=s(3779),w=s(1396),j=s.n(w),N=s(9548),k=()=>{let{user:e}=(0,v.useAuth)(),{currentPlan:t,subscription:s,availablePlans:n,isLoading:w,cancelSubscription:k,updateSubscription:C,checkAccess:Z,getRemainingUsage:S}=(0,b.useSubscription)(),[A,P]=(0,r.useState)(!1),[D,_]=(0,r.useState)(!1),U=async()=>{_(!0),await k()&&P(!1),_(!1)},M=async e=>{_(!0),await C(e),_(!1)},z=e=>new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(e);return w?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):t&&s?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:[(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(N.Z,{href:"/dashboard",label:"Back to Dashboard"})}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Manage Subscription"}),(0,a.jsx)("p",{className:"text-gray-600",children:"View and manage your Ana Fitness subscription"})]}),(0,a.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"lg:col-span-2",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Current Plan"}),(0,a.jsxs)("div",{className:"flex items-center px-3 py-1 rounded-full text-sm font-medium ".concat((e=>{switch(e){case"active":return"text-green-600 bg-green-100";case"cancelled":return"text-red-600 bg-red-100";case"expired":default:return"text-gray-600 bg-gray-100";case"trial":return"text-blue-600 bg-blue-100"}})(s.status)),children:[(e=>{switch(e){case"active":return(0,a.jsx)(l.Z,{className:"w-4 h-4"});case"cancelled":return(0,a.jsx)(c,{className:"w-4 h-4"});case"expired":default:return(0,a.jsx)(d.Z,{className:"w-4 h-4"});case"trial":return(0,a.jsx)(o.Z,{className:"w-4 h-4"})}})(s.status),(0,a.jsx)("span",{className:"ml-1 capitalize",children:s.status})]})]}),(0,a.jsxs)("div",{className:"flex items-center mb-6",children:[(0,a.jsx)("div",{className:"bg-gradient-to-br from-blue-500 to-purple-600 p-3 rounded-lg mr-4",children:"premium"===t.id?(0,a.jsx)(u.Z,{className:"w-8 h-8 text-white"}):"standard"===t.id?(0,a.jsx)(o.Z,{className:"w-8 h-8 text-white"}):(0,a.jsx)(m.Z,{className:"w-8 h-8 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:t.name}),(0,a.jsx)("p",{className:"text-gray-600",children:0===t.price?"Free forever":"$".concat(t.price,"/month")})]})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5 mr-2"}),(0,a.jsxs)("span",{children:["Started: ",z(s.startDate)]})]}),(0,a.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5 mr-2"}),(0,a.jsxs)("span",{children:["Renews: ",z(s.endDate)]})]})]}),(0,a.jsxs)("div",{className:"border-t pt-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"Plan Features"}),(0,a.jsx)("div",{className:"grid md:grid-cols-2 gap-2",children:t.features.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(l.Z,{className:"w-4 h-4 text-green-500 mr-2 flex-shrink-0"}),e]},t))})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Usage This Month"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,a.jsx)(h.Z,{className:"w-8 h-8 text-blue-600"})}),(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:"unlimited"===S("programs")?"âˆž":S("programs")}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Programs Remaining"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"bg-green-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,a.jsx)(m.Z,{className:"w-8 h-8 text-green-600"})}),(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:"unlimited"===S("liveClasses")?"âˆž":S("liveClasses")}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Live Classes Left"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"bg-purple-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,a.jsx)(p.Z,{className:"w-8 h-8 text-purple-600"})}),(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:"unlimited"===S("downloads")?"âˆž":S("downloads")}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Downloads Left"})]})]})]})]}),(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)(j(),{href:"/subscription",className:"flex items-center justify-between w-full p-3 text-left bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(y.Z,{className:"w-5 h-5 text-blue-600 mr-3"}),(0,a.jsx)("span",{className:"text-blue-900",children:"Change Plan"})]}),(0,a.jsx)(g.Z,{className:"w-4 h-4 text-blue-600"})]}),(0,a.jsxs)("button",{className:"flex items-center justify-between w-full p-3 text-left bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(f,{className:"w-5 h-5 text-gray-600 mr-3"}),(0,a.jsx)("span",{className:"text-gray-900",children:"Update Payment"})]}),(0,a.jsx)(g.Z,{className:"w-4 h-4 text-gray-600"})]}),"active"===s.status&&t.price>0&&(0,a.jsxs)("button",{onClick:()=>P(!0),className:"flex items-center justify-between w-full p-3 text-left bg-red-50 hover:bg-red-100 rounded-lg transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(c,{className:"w-5 h-5 text-red-600 mr-3"}),(0,a.jsx)("span",{className:"text-red-900",children:"Cancel Subscription"})]}),(0,a.jsx)(g.Z,{className:"w-4 h-4 text-red-600"})]})]})]}),"premium"!==t.id&&(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upgrade Options"}),n.filter(e=>e.price>t.price).map(e=>(0,a.jsxs)("div",{className:"border rounded-lg p-4 mb-3 last:mb-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900",children:e.name}),(0,a.jsxs)("span",{className:"text-lg font-bold text-gray-900",children:["$",e.price,"/mo"]})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-3",children:[e.features.slice(0,2).join(", "),"..."]}),(0,a.jsx)("button",{onClick:()=>M(e.id),disabled:D,className:"w-full bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50",children:D?"Processing...":"Upgrade to ".concat(e.name)})]},e.id))]})]})]})]}),A&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)(i.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-xl p-6 max-w-md w-full",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Cancel Subscription"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to cancel your subscription? You'll lose access to premium features at the end of your billing period."}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{onClick:()=>P(!1),className:"flex-1 bg-gray-100 text-gray-900 py-2 px-4 rounded-lg hover:bg-gray-200 transition-colors",children:"Keep Subscription"}),(0,a.jsx)("button",{onClick:U,disabled:D,className:"flex-1 bg-red-500 text-white py-2 px-4 rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50",children:D?"Cancelling...":"Cancel Subscription"})]})]})})]}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"No Subscription Found"}),(0,a.jsx)(j(),{href:"/subscription",className:"text-blue-600 hover:text-blue-800",children:"Choose a subscription plan"})]})})}},9548:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(7437),r=s(4033);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,s(2898).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var l=s(5251),n=function(e){let{href:t,label:s="Back",className:n=""}=e,c=(0,r.useRouter)();return(0,a.jsxs)(l.E.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},whileHover:{x:-5},whileTap:{scale:.95},onClick:()=>{t?c.push(t):c.back()},className:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 bg-white hover:bg-gray-50 border border-gray-300 rounded-lg shadow-sm transition-all duration-200 ".concat(n),children:[(0,a.jsx)(i,{className:"w-4 h-4 mr-2"}),s]})}},3779:function(e,t,s){"use strict";s.r(t),s.d(t,{AuthProvider:function(){return l},useAuth:function(){return n}});var a=s(7437),r=s(2265);let i=(0,r.createContext)(void 0);function l(e){let{children:t}=e,[s,l]=(0,r.useState)(null),[n,c]=(0,r.useState)(!0);(0,r.useEffect)(()=>{d()},[]);let d=async()=>{try{let e=localStorage.getItem("auth_token");if(e){if(e.startsWith("demo_token_")){let e={id:"1",name:"Demo User",email:"demo@example.com",subscription:"free",createdAt:new Date().toISOString()};l(e)}else localStorage.removeItem("auth_token")}}catch(e){console.error("Auth check failed:",e)}finally{c(!1)}},o=async(e,t)=>{try{if(!e||!t)return{success:!1,error:"Please enter email and password"};{let t={id:"1",name:"Demo User",email:e,subscription:"free",createdAt:new Date().toISOString()},s="demo_token_"+Date.now();return localStorage.setItem("auth_token",s),l(t),{success:!0}}}catch(e){return{success:!1,error:"Login failed"}}},u=async(e,t,s)=>{try{if(!e||!t||!s)return{success:!1,error:"Please fill in all fields"};{let s={id:"1",name:e,email:t,subscription:"free",createdAt:new Date().toISOString()},a="demo_token_"+Date.now();return localStorage.setItem("auth_token",a),l(s),{success:!0}}}catch(e){return{success:!1,error:"Registration failed"}}};return(0,a.jsx)(i.Provider,{value:{user:s,loading:n,login:o,register:u,logout:()=>{localStorage.removeItem("auth_token"),l(null)},updateSubscription:e=>{s&&l({...s,subscription:e})}},children:t})}function n(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},1638:function(e,t,s){"use strict";s.r(t),s.d(t,{SubscriptionProvider:function(){return n},useSubscription:function(){return c}});var a=s(7437),r=s(2265);let i=(0,r.createContext)(void 0),l=[{id:"free",name:"Free",price:0,features:["Access to 5 basic workout programs","Limited progress tracking","Community access","Basic nutrition tips","Standard video quality"],limits:{programs:5,liveClasses:0,downloads:0,support:"basic"}},{id:"standard",name:"Standard",price:19.99,features:["Access to 50+ workout programs","Full progress tracking & analytics","Live classes (5 per month)","Personalized meal plans","HD video quality","Priority customer support","Offline video downloads"],limits:{programs:50,liveClasses:5,downloads:10,support:"priority"}},{id:"premium",name:"Premium",price:39.99,features:["Unlimited access to all programs","Advanced analytics & insights","Unlimited live classes","Personal trainer consultations","4K video quality","24/7 priority support","Exclusive premium content","Custom workout creation","Nutrition coaching","Achievement badges & rewards"],limits:{programs:"unlimited",liveClasses:"unlimited",downloads:"unlimited",support:"24/7"}}],n=e=>{let{children:t}=e,[s,n]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[o,u]=(0,r.useState)(!0),[m,x]=(0,r.useState)({programsAccessed:0,liveClassesAttended:0,downloadsUsed:0});(0,r.useEffect)(()=>{(()=>{let e=l.find(e=>"free"===e.id);e&&(n(e),d({planId:"free",status:"active",startDate:new Date,endDate:new Date(Date.now()+31536e6),autoRenew:!1})),u(!1)})()},[]);let h=async(e,t)=>{try{u(!0),await new Promise(e=>setTimeout(e,1e3));let s=l.find(t=>t.id===e);if(!s)return!1;let a=new Date;return"monthly"===t?a.setMonth(a.getMonth()+1):a.setFullYear(a.getFullYear()+1),n(s),d({planId:e,status:"active",startDate:new Date,endDate:a,autoRenew:!0}),x({programsAccessed:0,liveClassesAttended:0,downloadsUsed:0}),!0}catch(e){return console.error("Subscription error:",e),!1}finally{u(!1)}},p=async()=>{try{return u(!0),await new Promise(e=>setTimeout(e,1e3)),c&&d({...c,status:"cancelled",autoRenew:!1}),!0}catch(e){return console.error("Cancellation error:",e),!1}finally{u(!1)}},y=async e=>{try{u(!0),await new Promise(e=>setTimeout(e,1e3));let t=l.find(t=>t.id===e);if(!t||!c)return!1;return n(t),d({...c,planId:e}),!0}catch(e){return console.error("Update error:",e),!1}finally{u(!1)}};return(0,a.jsx)(i.Provider,{value:{currentPlan:s,subscription:c,availablePlans:l,isLoading:o,subscribeToPlan:h,cancelSubscription:p,updateSubscription:y,checkAccess:e=>{if(!s)return!1;switch(e){case"programs":if("unlimited"===s.limits.programs)return!0;return m.programsAccessed<s.limits.programs;case"liveClasses":if("unlimited"===s.limits.liveClasses)return!0;return m.liveClassesAttended<s.limits.liveClasses;case"downloads":if("unlimited"===s.limits.downloads)return!0;return m.downloadsUsed<s.limits.downloads;case"premiumContent":case"personalTrainer":case"customWorkouts":return"premium"===s.id;default:return!0}},getRemainingUsage:e=>{if(!s)return 0;switch(e){case"programs":if("unlimited"===s.limits.programs)return"unlimited";return Math.max(0,s.limits.programs-m.programsAccessed);case"liveClasses":if("unlimited"===s.limits.liveClasses)return"unlimited";return Math.max(0,s.limits.liveClasses-m.liveClassesAttended);case"downloads":if("unlimited"===s.limits.downloads)return"unlimited";return Math.max(0,s.limits.downloads-m.downloadsUsed);default:return 0}}},children:t})},c=()=>{let e=(0,r.useContext)(i);if(void 0===e)throw Error("useSubscription must be used within a SubscriptionProvider");return e}},4033:function(e,t,s){e.exports=s(5313)}},function(e){e.O(0,[581,396,971,938,744],function(){return e(e.s=7010)}),_N_E=e.O()}]);