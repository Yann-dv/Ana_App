(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{1016:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]])},8957:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},6614:function(e,t,s){Promise.resolve().then(s.bind(s,7736))},7736:function(e,t,s){"use strict";s.r(t);var a=s(7437),r=s(2265),i=s(5251),n=s(6654),l=s(7810),o=s(5750),c=s(1016),d=s(8957),m=s(6141),x=s(9168),p=s(4900),u=s(8203),h=s(5790),g=s(1827),y=s(2482),v=s(2245),f=s(3779),j=s(1638),w=s(5409),b=s(4895),N=s(1396),S=s.n(N);let k=[{id:"1",title:"Morning Yoga Flow",description:"Start your day with energizing yoga sequences",category:"yoga",level:"beginner",duration:30,instructor:{id:"1",name:"Sarah Johnson",bio:"Certified yoga instructor with 10+ years experience",avatar:"/instructors/sarah.jpg",specialties:["Yoga","Meditation"],experience:10,rating:4.9,totalStudents:2500},thumbnail:"/programs/yoga-flow.jpg",videos:[],tags:["yoga","morning","flexibility"],rating:4.8,reviewCount:245,requiredSubscription:"free"},{id:"2",title:"HIIT Cardio Blast",description:"High-intensity interval training for maximum results",category:"cardio",level:"intermediate",duration:25,instructor:{id:"2",name:"Mike Chen",bio:"Personal trainer and fitness coach",avatar:"/instructors/mike.jpg",specialties:["HIIT","Strength Training"],experience:8,rating:4.8,totalStudents:1800},thumbnail:"/programs/hiit-cardio.jpg",videos:[],tags:["hiit","cardio","fat-burn"],rating:4.7,reviewCount:189,requiredSubscription:"standard"},{id:"3",title:"Pilates Core Strength",description:"Build core strength and stability with pilates",category:"pilates",level:"intermediate",duration:35,instructor:{id:"3",name:"Emma Wilson",bio:"Certified pilates instructor",avatar:"/instructors/emma.jpg",specialties:["Pilates","Core Training"],experience:6,rating:4.7,totalStudents:1200},thumbnail:"/programs/pilates-core.jpg",videos:[],tags:["pilates","core","strength"],rating:4.9,reviewCount:156,requiredSubscription:"premium"}],C=[{id:"1",title:"Live Yoga Session",instructor:{id:"1",name:"Sarah Johnson",bio:"Certified yoga instructor",avatar:"/instructors/sarah.jpg",specialties:["Yoga"],experience:10,rating:4.9,totalStudents:2500},scheduledAt:new Date(Date.now()+72e5).toISOString(),duration:60,maxParticipants:50,currentParticipants:23,category:"yoga",level:"beginner",requiredSubscription:"standard",streamUrl:"https://stream.example.com/live1",isLive:!0,description:"Join us for a relaxing yoga session"},{id:"2",title:"HIIT Challenge",instructor:{id:"2",name:"Mike Chen",bio:"Personal trainer",avatar:"/instructors/mike.jpg",specialties:["HIIT"],experience:8,rating:4.8,totalStudents:1800},scheduledAt:new Date(Date.now()+144e5).toISOString(),duration:30,maxParticipants:30,currentParticipants:18,category:"cardio",level:"advanced",requiredSubscription:"premium",streamUrl:"https://stream.example.com/live2",isLive:!1,description:"High-intensity workout challenge"}];t.default=()=>{let{user:e,logout:t}=(0,f.useAuth)(),{currentPlan:s,checkAccess:N,getRemainingUsage:D}=(0,j.useSubscription)(),{getTotalWatchTime:P,getCompletedVideosCount:A}=(0,w.useVideo)(),{userProgress:_,unlockedAchievements:Z,getTodayActivity:M}=(0,b.useProgress)(),[T,q]=(0,r.useState)("programs"),[I,W]=(0,r.useState)(""),[E,L]=(0,r.useState)("all"),[U,O]=(0,r.useState)(k);if((0,r.useEffect)(()=>{let e=k;"all"!==E&&(e=e.filter(e=>e.category===E)),I&&(e=e.filter(e=>e.title.toLowerCase().includes(I.toLowerCase())||e.description.toLowerCase().includes(I.toLowerCase())||e.instructor.name.toLowerCase().includes(I.toLowerCase()))),O(e)},[I,E]),!e)return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})});let H=[{id:"all",name:"All Programs",icon:n.Z},{id:"yoga",name:"Yoga",icon:l.Z},{id:"pilates",name:"Pilates",icon:o.Z},{id:"cardio",name:"Cardio",icon:c.Z},{id:"strength",name:"Strength",icon:d.Z}],F=e=>e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),J=e=>{let t={free:{text:"FREE",color:"bg-green-100 text-green-800"},standard:{text:"STANDARD",color:"bg-blue-100 text-blue-800"},premium:{text:"PREMIUM",color:"bg-purple-100 text-purple-800"}};return t[e]||t.free};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"py-4 sm:py-6",children:(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center sm:text-left",children:[(0,a.jsxs)("h1",{className:"text-2xl sm:text-3xl font-display font-bold text-gray-900",children:["Welcome back, ",null==e?void 0:e.name,"! \uD83D\uDC4B"]}),(0,a.jsx)("p",{className:"text-gray-600 mt-2 text-sm sm:text-base",children:"Ready to continue your fitness journey?"})]})})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-8",children:[(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-8",children:[(0,a.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-primary-100 rounded-lg",children:(0,a.jsx)(n.Z,{className:"h-6 w-6 text-primary-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Videos Completed"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null==_?void 0:_.totalVideosCompleted)||A()})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-secondary-100 rounded-lg",children:(0,a.jsx)(m.Z,{className:"h-6 w-6 text-secondary-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Watch Time"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:_?"".concat(Math.floor(_.totalWatchTime/3600),"h ").concat(Math.floor(_.totalWatchTime%3600/60),"m"):"".concat(Math.floor(P()/3600),"h ").concat(Math.floor(P()%3600/60),"m")})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,a.jsx)(d.Z,{className:"h-6 w-6 text-green-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Current Level"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null==_?void 0:_.level)||1})]})]})}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl p-6 shadow-sm text-white",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-white/20 rounded-lg",children:(0,a.jsx)(x.Z,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-white/90",children:[null==s?void 0:s.name," Plan"]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:"unlimited"===D("programs")?"∞":D("programs")}),(0,a.jsx)("p",{className:"text-xs text-white/80",children:"Programs remaining"})]})]}),(0,a.jsx)(S(),{href:"/subscription/manage",className:"mt-3 inline-block text-xs bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full transition-colors",children:"Manage Plan"})]})]}),(0,a.jsx)("div",{className:"bg-white shadow-sm border-b mb-8",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("nav",{className:"flex space-x-4 sm:space-x-8 overflow-x-auto scrollbar-hide",children:[(0,a.jsx)(S(),{href:"/dashboard",className:"text-blue-600 border-b-2 border-blue-600 pb-2 whitespace-nowrap",children:"Dashboard"}),(0,a.jsx)(S(),{href:"/programs",className:"text-gray-600 hover:text-gray-900 pb-2 whitespace-nowrap",children:"Programs"}),(0,a.jsx)(S(),{href:"/progress",className:"text-gray-600 hover:text-gray-900 pb-2 whitespace-nowrap",children:"Progress"}),(0,a.jsx)(S(),{href:"/subscription",className:"text-gray-600 hover:text-gray-900 pb-2 whitespace-nowrap",children:"Subscription"})]})})}),(0,a.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"bg-white rounded-xl shadow-sm mb-8",children:(0,a.jsx)("div",{className:"border-b border-gray-200",children:(0,a.jsx)("nav",{className:"flex space-x-4 sm:space-x-8 px-4 sm:px-6 overflow-x-auto scrollbar-hide",children:[{id:"programs",name:"Programs",icon:p.Z},{id:"live",name:"Live Classes",icon:u.Z},{id:"progress",name:"Progress",icon:h.Z}].map(e=>{let t=e.icon;return(0,a.jsxs)("button",{onClick:()=>q(e.id),className:"flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors whitespace-nowrap ".concat(T===e.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,a.jsx)(t,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:e.name}),(0,a.jsx)("span",{className:"sm:hidden",children:e.name.split(" ")[0]})]},e.id)})})})}),"programs"===T&&(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:[(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 mb-8",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(g.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search programs...",value:I,onChange:e=>W(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 sm:min-w-0",children:[(0,a.jsx)(y.Z,{className:"h-5 w-5 text-gray-400 flex-shrink-0"}),(0,a.jsx)("select",{value:E,onChange:e=>L(e.target.value),className:"border border-gray-300 rounded-lg px-3 py-3 focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm min-w-0 flex-1 sm:flex-initial",children:H.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))})]})]})}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:U.map((e,t)=>{let s=J(e.requiredSubscription);return(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1*t},className:"bg-white rounded-xl shadow-sm overflow-hidden hover:shadow-lg transition-shadow cursor-pointer",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"aspect-video bg-gradient-to-br from-primary-100 to-secondary-100 flex items-center justify-center",children:(0,a.jsx)(p.Z,{className:"h-12 w-12 text-primary-600"})}),(0,a.jsx)("div",{className:"absolute top-3 right-3 px-2 py-1 rounded-full text-xs font-medium ".concat(s.color),children:s.text})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg text-gray-900 mb-2",children:e.title}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[e.duration,"min"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(v.Z,{className:"h-4 w-4 text-yellow-400 fill-current"}),(0,a.jsx)("span",{children:e.rating})]})]}),(0,a.jsx)("span",{className:"capitalize px-2 py-1 bg-gray-100 rounded-full text-xs",children:e.level})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-xs font-medium text-gray-600",children:e.instructor.name.charAt(0)})}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:e.instructor.name})]}),(0,a.jsx)("button",{className:"btn-primary text-sm px-4 py-2",children:"Start"})]})]})]},e.id)})})]}),"live"===T&&(0,a.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"space-y-6",children:C.map((e,t)=>{let s=J(e.requiredSubscription);return(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-lg text-gray-900",children:e.title}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:e.description})]}),(0,a.jsx)("div",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(s.color),children:s.text})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:F(new Date(e.scheduledAt))})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 text-gray-400"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[e.duration,"min"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 text-gray-400"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[e.currentParticipants,"/",e.maxParticipants]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsx)("span",{className:"text-sm text-gray-600 capitalize",children:e.level})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-xs font-medium text-gray-600",children:e.instructor.name.charAt(0)})}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:e.instructor.name})]}),(0,a.jsx)("button",{className:"btn-primary",children:"Join Live"})]})]},e.id)})}),"progress"===T&&(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"bg-white rounded-xl shadow-sm p-6",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Your Progress"}),(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(h.Z,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Progress tracking coming soon! Keep working out to see your stats."})]})]})]})]})}},4895:function(e,t,s){"use strict";s.r(t),s.d(t,{ProgressProvider:function(){return l},useProgress:function(){return o}});var a=s(7437),r=s(2265);let i=[{id:"first_video",title:"First Steps",description:"Complete your first workout video",icon:"\uD83C\uDFAF",category:"milestone",requirement:{type:"videos_completed",value:1},points:50,isUnlocked:!1},{id:"five_videos",title:"Getting Started",description:"Complete 5 workout videos",icon:"\uD83D\uDD25",category:"workout",requirement:{type:"videos_completed",value:5},points:100,isUnlocked:!1},{id:"ten_videos",title:"Dedicated Learner",description:"Complete 10 workout videos",icon:"\uD83D\uDCAA",category:"workout",requirement:{type:"videos_completed",value:10},points:200,isUnlocked:!1},{id:"first_hour",title:"Time Keeper",description:"Watch 1 hour of content",icon:"⏰",category:"time",requirement:{type:"total_time",value:3600},points:75,isUnlocked:!1},{id:"five_hours",title:"Committed Student",description:"Watch 5 hours of content",icon:"\uD83D\uDCDA",category:"time",requirement:{type:"total_time",value:18e3},points:250,isUnlocked:!1},{id:"three_day_streak",title:"Consistency",description:"Maintain a 3-day workout streak",icon:"\uD83D\uDD25",category:"streak",requirement:{type:"streak_days",value:3},points:150,isUnlocked:!1},{id:"week_streak",title:"Weekly Warrior",description:"Maintain a 7-day workout streak",icon:"⚡",category:"streak",requirement:{type:"streak_days",value:7},points:300,isUnlocked:!1},{id:"first_program",title:"Program Pioneer",description:"Complete your first program",icon:"\uD83C\uDFC6",category:"milestone",requirement:{type:"programs_completed",value:1},points:500,isUnlocked:!1}],n=(0,r.createContext)(void 0),l=e=>{let{children:t}=e,[s,l]=(0,r.useState)({totalPoints:0,level:1,experiencePoints:0,experienceToNextLevel:100,totalVideosCompleted:0,totalWatchTime:0,currentStreak:0,longestStreak:0,programsCompleted:0,weeklyGoal:{target:150,current:0,weekStart:new Date},monthlyStats:{videosCompleted:0,timeWatched:0,programsStarted:0,month:new Date().getMonth(),year:new Date().getFullYear()}}),[o,c]=(0,r.useState)(i),[d,m]=(0,r.useState)([]),[x,p]=(0,r.useState)([]);(0,r.useEffect)(()=>{let e=localStorage.getItem("userProgress");if(e)try{let t=JSON.parse(e);l({...t,lastActivityDate:t.lastActivityDate?new Date(t.lastActivityDate):void 0,weeklyGoal:{...t.weeklyGoal,weekStart:new Date(t.weeklyGoal.weekStart)}})}catch(e){console.error("Failed to load user progress:",e)}let t=localStorage.getItem("achievements");if(t)try{let e=JSON.parse(t);c(e.map(e=>({...e,unlockedAt:e.unlockedAt?new Date(e.unlockedAt):void 0})))}catch(e){console.error("Failed to load achievements:",e)}let s=localStorage.getItem("dailyActivities");if(s)try{m(JSON.parse(s))}catch(e){console.error("Failed to load daily activities:",e)}let a=localStorage.getItem("pointsHistory");if(a)try{p(JSON.parse(a))}catch(e){console.error("Failed to load points history:",e)}},[]),(0,r.useEffect)(()=>{localStorage.setItem("userProgress",JSON.stringify(s))},[s]),(0,r.useEffect)(()=>{localStorage.setItem("achievements",JSON.stringify(o))},[o]),(0,r.useEffect)(()=>{localStorage.setItem("dailyActivities",JSON.stringify(d))},[d]),(0,r.useEffect)(()=>{localStorage.setItem("pointsHistory",JSON.stringify(x))},[x]);let u=()=>{let e=new Date().toISOString().split("T")[0];return d.find(t=>t.date===e)||{date:e,videosCompleted:0,timeWatched:0,programsStarted:0,points:0}},h=()=>{let e=[...d].sort((e,t)=>t.date.localeCompare(e.date)),t=0,s=new Date;for(let a of e){let e=new Date(a.date);if(Math.floor((s.getTime()-e.getTime())/864e5)===t&&a.videosCompleted>0)t++,s=e;else break}return t},g=(e,t)=>{l(t=>({...t,totalPoints:t.totalPoints+e,experiencePoints:t.experiencePoints+e})),p(s=>[...s,{date:new Date().toISOString(),points:e,reason:t}])},y=o.filter(e=>e.isUnlocked);return(0,a.jsx)(n.Provider,{value:{userProgress:s,updateProgress:e=>{let t=new Date().toISOString().split("T")[0],s={...u(),...e,date:t};m(e=>[...e.filter(e=>e.date!==t),s]),l(t=>{let s={...t};e.videosCompleted&&(s.totalVideosCompleted+=e.videosCompleted,s.monthlyStats.videosCompleted+=e.videosCompleted),e.timeWatched&&(s.totalWatchTime+=e.timeWatched,s.monthlyStats.timeWatched+=e.timeWatched,s.weeklyGoal.current+=Math.floor(e.timeWatched/60)),e.programsStarted&&(s.monthlyStats.programsStarted+=e.programsStarted),s.lastActivityDate=new Date,s.currentStreak=h();let a=s.experiencePoints+(e.points||0),r=Math.floor(a/100)+1;return s.experiencePoints=a,s.level=r,s.experienceToNextLevel=100*r-a,s})},achievements:o,unlockedAchievements:y,checkAndUnlockAchievements:()=>{let e=[];return c(t=>t.map(t=>{if(t.isUnlocked)return t;let a=!1;switch(t.requirement.type){case"videos_completed":a=s.totalVideosCompleted>=t.requirement.value;break;case"total_time":a=s.totalWatchTime>=t.requirement.value;break;case"streak_days":a=s.currentStreak>=t.requirement.value;break;case"programs_completed":a=s.programsCompleted>=t.requirement.value}if(a){let s={...t,isUnlocked:!0,unlockedAt:new Date};return e.push(s),g(t.points,"Achievement: ".concat(t.title)),s}return t})),e},dailyActivities:d,getTodayActivity:u,getWeeklyActivity:()=>{let e=new Date;return e.setDate(e.getDate()-e.getDay()),d.filter(t=>new Date(t.date)>=e)},getMonthlyActivity:()=>{let e=new Date;return e.setDate(1),d.filter(t=>new Date(t.date)>=e)},updateWeeklyGoal:e=>{l(t=>({...t,weeklyGoal:{...t.weeklyGoal,target:e}}))},calculateStreak:h,getProgressStats:()=>{let e=s.totalVideosCompleted,t=e>0?s.totalWatchTime/e:0;return{totalWorkouts:e,averageSessionTime:t,favoriteCategory:"Yoga",improvementRate:15}},addPoints:g,getPointsHistory:()=>x},children:t})},o=()=>{let e=(0,r.useContext)(n);if(void 0===e)throw Error("useProgress must be used within a ProgressProvider");return e};t.default=n}},function(e){e.O(0,[581,396,492,971,938,744],function(){return e(e.s=6614)}),_N_E=e.O()}]);